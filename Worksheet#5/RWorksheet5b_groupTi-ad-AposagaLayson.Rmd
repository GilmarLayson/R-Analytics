---
title: "RWorksheet5b_groupTi-ad-Aposaga_Layson"
author: "James Cedrick Tiad"
date: "2024-12-05"
output: pdf_document
---

```{r}
library(rvest)
library(dplyr)
library(stringr)
```


```{r}
# Define the list of product URLs and corresponding names
product_urls <- c(
  "https://www.amazon.com/Shuttle-Art-Complete-Professional-Beginners/dp/B0BF9HFY2Y/ref=sr_1_1?dib=eyJ2IjoiMSJ9.bEd-hKt9BrawAEYUTGI87zj_jkq7BeWAsZ9IBb-PPUNhTXrcyPuyqv5ZZX_HFdD1_1SIQS_1AJzVCr0wI5t7YzHrY2xtyT7IiFic2az7SSh8YgvY5GmMTNc6mROL1ifYFW4tM5mZ-Z72ceH-hOTUNQRdocsQwntRyhRxgglEkWnahZ2BhrKfnjXtg9SCrWMoi6BLzmF5EUIEyZKRAG7m-iqDHyGypDsagv9U61o9hyTU0WX3LiifSbdElG6mmu6dIx-rAyHbqQf7yjoWAzgRYSGPLKPO_IcS5r8OzHk4NCM.N5FPr-7sta7UimWyCoej_Ji8owKt9Fgh5mG7nJBSwv0&dib_tag=se&keywords=Shuttle+Art+116+PCS+Drawing+Kit%2C+Professional+Drawing+Supplies+with+Sketch%2C+Charcoal%2C+Colored%2C+Graphite%2C+Pastel+Pencils+%26+Sticks%2C+Complete+Drawing+Tools+and+Paper+Pads+in+Zipper+Case+for+Artists%26Kids&qid=1733148727&s=arts-crafts&sr=1-1",
  "https://www.amazon.com/Supplies-Caliart-153-Pack-Painting-Beginners/dp/B0B2L933Y4/ref=sr_1_1?dib=eyJ2IjoiMSJ9.TewiDzbJxsZebhiN06pnEA4OOB4WTmomfs4rX4YubSEiZhS-fdGTUI8t9f0xMkRCDkbs5DVoBtLY-GF9jaDhe7TBHZkdMVgAE17moWjC34R-YYH7iCDfNIkBBXpheWmlMqzkN5yIWFgko1sRG6Z5tuSLa651r5q5MJ6lUbOhWiM8BBiAd3DA9NpZ5u0Fl3jatz5AorF-QNpsyuEAtjBi85Zv8zd0AhXE7-XdogYwH5gwbsxeaw6PuvYSI5eSeEdN1Eqy8oI-2bPsNSBnyydnf2V3sCNeSAVla6KebuPte6M.hLigQGY4pZVJ0KCI3QBYwY5lhCNHVj21sWEyhXJPC-s&dib_tag=se&keywords=Caliart+Art+Supplies%2C+153-Pack+Deluxe+Wooden+Art+Set+Crafts+Drawing+Painting+Coloring+Supplies+Kit+with+2+A4+Sketch+Pads%2C+Halloween+Creative+Gift+Box+for+Adults+Artist+Beginners+Kids+Girls+Boys&qid=1733149144&s=arts-crafts&sr=1-1",
  "https://www.amazon.com/Castle-Art-Supplies-artists-convenient/dp/B07ZP8QP2V/ref=sr_1_1?dib=eyJ2IjoiMSJ9.6fxnVpaUKzkvTSAvmQAK3JDxK4nxQwkFdtr6lG28pIUHjoIyaXn6xfCGQ0THKpQhwD3awlE7vJkFj1dkRpmtS4VNCoKbcRkdjX9OIP_qI_FMzXfYYawRRXGPVHz4lBVJRHYfWCb3mgt8EYJDM23Xw-ezfy3PLdRDTWddixG63hjJzfuUv2JFuiSK5Pzl9gHWCLBfD9is-4ihX_wJQ4YzSh2PcC9-ljIr_DlNECjCjE4LDYSrEIv-56xest9Ini954mYt_YYkLQqR1J5jt7swmtwtkez4t5h-JLI9e3IjvZU.N2qXwv0-mg8hfkSO7-xEF3DjwvAb6uED3W1DvHiiT7k&dib_tag=se&keywords=Castle+Art+Supplies+120+Colored+Pencils+Zipper-Case+Set+%7C+Quality+Soft+Core+Colored+Leads+for+Adult+Artists%2C+Professionals+and+Colorists+%7C+In+Neat%2C+Strong+Carry-Anywhere+Zipper+Case&qid=1733149190&s=arts-crafts&sr=1-1",
  "https://www.amazon.com/POSCA-8-Color-Paint-Marker-Medium/dp/B07Z86PHP8/ref=sr_1_1?dib=eyJ2IjoiMSJ9.6XTF8XMbBlvXRxicbRNjiWUuWJJ3vvNXYivaRBe6MJNmmyF5laggXCTTgg-mYDByGKYdvu4nOKMWxZtqynf7iox4XxcCkWX8r-8luMox86gPwHcGOJ7XmwMkEqSc2DOrhs3HhZpk-y-Ua3w0wICDDTrWkKJPXW0M9XgDci3baPovL_cynUt7UpGD3FTXAoBPrXLnnaOrkfbYQne2eZZRvOMHwJYDKok5OMC8VdbRVdS25qqtcFrz3v4bhLiCBZETvxo7wVT9U0H56DWNIpqmPiLBUx8i55ajaXEngmiV8lQ.VHmdxk-WX8reOrCfKyv37hcHe57jPn2SeH71F7obNl0&dib_tag=se&keywords=POSCA+8-Color+Paint+Marker+Set%2C+PC-5M+Medium&qid=1733149239&s=arts-crafts&sr=1-1",
  "https://www.amazon.com/100-Sheets-Sketchbook-Artistic-Painting-Beginners/dp/B09JLH4BWL/ref=sr_1_1?dib=eyJ2IjoiMSJ9.ErHgvBxe9NCy-2AujjFtIa_UfPKI1cXU27pWR7Ai9UBnYggHfD7M6gXLLBE_kvSs2mJjiZ9u6RcCL5qcFYItwg23YXyv3K_QV8C4M7JwJibNsqFCtcIh7yyS6ST1zUGwEHtHi-gMlflz4Lzs5qEDuEYbvoUza-FX11nsmnjbeN9wcUSO2pEp70whfN0rV91c9d6O3YFqTTf4Xe3K3rD0uVcwFeieHKc5CHY-F9paY8K6fugIaxAdYPC3opMIMiI9KLhSoa5FtxRybzvb8vOAIKMxNOeNlJJL1mqMvH1VBsU.V3NNDxbJSk9HGYqd6mg2iZScBdn8t61cCOq_wpDhTIc&dib_tag=se&keywords=9+x+12+inches+Sketch+Book%2C+Top+Spiral+Bound+Sketch+Pad%2C+1+Pack+100-Sheets+%2868lb%2F100gsm%29%2C+Acid+Free+Art+Sketchbook+Artistic+Drawing+Painting+Writing+Paper+for+Kids+Adults+Beginners+Artists&qid=1733149282&s=arts-crafts&sr=1-1",
  "https://www.amazon.com/SHARPIE-Creative-Markers-Water-Based-Assorted/dp/B0CPMTDYVB/ref=sr_1_1?dib=eyJ2IjoiMSJ9.PQAOLeHe42iawA-0AAQi4cvNQxlciVQa9k85AoBD5aJmwbUBw44uvpLMU5CacZfiSccCUgYFR24iVd8Uc8yMPSU71bgjxK5LhmRmFw7iGpcSjbpAj461oK46jGe94fiNamp8QAwji7pFnv_D1SWSaXhCfkYwOCpqCTfz5VZREuMdZ9Xbd6Spsfa5fmtdG3MOUQVl_98R30UTl9Gt8uHoaWqgp32tRJx36eWGJVo0mY3EfYa6wBE0ykvl0AyAkH9gH699dMCudSxdKLwDcmsb1CdE7V0CkYM96pWnbN9ekjo.pDcap_8Rtsnd-su4GfUOyzH6k4R-O3ogQVJ0KNnmOK8&dib_tag=se&keywords=Sharpie+Creative+Paint-like+Brush+Tip+Acrylic+Markers%2C+Assorted+Colors%2C+Stocking+Stuffers%2C+12+Count%2C+Perfect+for+Art+and+Craft+Supplies&qid=1733149309&s=arts-crafts&sr=1-1",
  "https://www.amazon.com/Crayola-Washable-Markers-Retractable-Supplies/dp/B08LQYT546/ref=sr_1_1?dib=eyJ2IjoiMSJ9.2spLrUJ8zAbA79oNEvyI8SUX7Q0qdLyJvnnOmPS0JydCE-JoU775o0_5FfDGK8CWIbcTYoDzhIU5q1EhjLlc11kWFCzHNV5jJh4oH-298cSrc7iybUGTuEau7NJnOmXyMLxu9O6Hqw11CY8zqHXudvy3MEBQ5iLuDvsDE-m20NE8MnINEgbCR3mf9sA0pKmJeAZPsZofR5um8c79fF6NgHRN2ZyWKMX9ICE3xQNNx0mOGsPMDPO8bgPAjNKnBc06IFjW639iZH41aoACWNG_fKe8qhN0HtcLU9WnctyUCZA.wAnjOSzaDpQ9QeBvMpEVHlmdrxV-Po66wXHygcUXXOE&dib_tag=se&keywords=crayola+Clicks+Retractable+Tip+Markers+%2810ct%29%2C+Washable+Art+Marker+Set%2C+Coloring+Markers+for+Kids%2C+Stocking+Stuffer+for+Kids%2C+3%2B&qid=1733149355&s=arts-crafts&sr=1-1",
  "https://www.amazon.com/Melissa-Doug-Drawing-Paper-inches/dp/B01AW5V7PE/ref=sr_1_1?dib=eyJ2IjoiMSJ9.A1KTvQwDX5dgfomtPZaS_tcEQR30nx7Ngbo7u-b3IOC-nsUDHDAXV_OnJStyrPAaUWO812QaEUgvTw_OFuc1HG1RD44Ku_xL9C8BRRCHtnc0-wmXsYft71_pwyLot5vX68OAzKqXlBNx4XSUF23w4RKzdtxpDs9QlzDd23gD7aocrKkHcJ8uCtL0th-R5Zr5GtVpdNbgco0aI7S_x9CIsaL2o4txU02eWEX1FuUteXxx08DHHesuXf70iHckeTwTYCDTMQ4ulTL6TBH59gdYpy9hCm5-sjSovtPP4uF6FI0.vKjcHqOVvzWtNxdHFVKKQQIQ6beZ03cV_GTr6ha7obs&dib_tag=se&keywords=Melissa+%26+Doug+Drawing+Paper+Pad+%289+x+12+inches%29+-+50+Sheets%2C+3-Pack+-+FSC+Certified&qid=1733149418&s=arts-crafts&sr=1-1",
  "https://www.amazon.com/Soucolor-72-Color-Coloring-Crafting-72-Colors/dp/B01N09ZDEI/ref=sr_1_1?dib=eyJ2IjoiMSJ9.5IqSZFFYQY8dSdn0VNWFp8KgTDw2jBm9iOBnChSRyzRmFxSitTRHKr58xEBAgr_6CXEHR4FVil-L98b-_ASZGWrZco9xtvMG8wIPM9ySqXGNlrGHj2CFwE2QuEB1JdkvaBV_nHleSwNdGuh2MQ-un2kuc7kKHx7BK84gGGmysOepS4qhckypXSjSFt00gIlVqbdKbz_JviauGqA-P7Fc1vHBjHdbtyOjY1XNYrutyHtPj-5EqN6wic5ggujVtQLcG4ex7p9HtCLlMawLSnnfUMSprcNgWjZ5kZdKPK_9fP8.11cY-Lb4Cd1yAzMSDLLdXb0MZWOW3S1BLy4vuav3JHM&dib_tag=se&keywords=Soucolor+72-Color+Colored+Pencils+for+Adult+Coloring+Books%2C+Back+to+School+Supplies%2C+Soft+Core+Artist+Sketching+Drawing+Pencils+Drawing+Supplies%2C+Art+Supplies+Kit+for+Adults+Kids%2C+Coloring+Pencils+Set&qid=1733149450&s=arts-crafts&sr=1-1",
  "https://www.amazon.com/KALOUR-Colored-Coloring-Blending-Beginners/dp/B0BHYGM2XG/ref=sr_1_1?dib=eyJ2IjoiMSJ9.wCR3-uPL-nBteAnOLtbzsPyldzfAeSMn5p2qfpdh7Oj5Cat3klw69C0OAhfAyyJe1V-m3YiwiDOXzOXVZbHAzQVQ1EZI3rY5aQQI86ly-iaP9L5Wv47TVRXLfDFzGPwoftZzffhpUcCnS0wbFWhFIFSf4BRkZ4XHCWN3CFrDy3Pqk6ucEvicg0yD06K3VsvfkZo2b5I03Jat9edgRJ3hT2D4ILgS5FutVO6Qp58kzhVWuN6sw4QbkiDaYeKolLFQ9hfdWvBo5UtW_jQVnh1um4jroA4p8JQYDz3fccRAzRE.EI1pPCb0VVJNXII9A4cXM7-evXOsQtPt01EQdqSWopQ&dib_tag=se&keywords=KALOUR+72+Count+Colored+Pencils+for+Adult+Coloring+Books%2C+Soft+Core%2CIdeal+for+Drawing+Blending+Shading%2CColor+Pencils+Set+Gift+for+Adults+Kids+Beginners&qid=1733149472&s=arts-crafts&sr=1-1"
)

product_titles <- c(
  "Shuttle Art 116 PCS Drawing Kit, Professional Drawing Supplies with Sketch, Charcoal, Colored, Graphite, Pastel Pencils & Sticks, Complete Drawing Tools and Paper Pads in Zipper Case for Artists&Kids",
  "Caliart Art Supplies, 153-Pack Deluxe Wooden Art Set Crafts Drawing Painting Coloring Supplies Kit with 2 A4 Sketch Pads, Halloween Creative Gift Box for Adults Artist Beginners Kids Girls Boys",
  "Castle Art Supplies 120 Colored Pencils Zipper-Case Set | Quality Soft Core Colored Leads for Adult Artists, Professionals and Colorists | In Neat, Strong Carry-Anywhere Zipper Case",
  "POSCA 8-Color Paint Marker Set, PC-5M Medium",
  "9 x 12 inches Sketch Book, Top Spiral Bound Sketch Pad, 1 Pack 100-Sheets (68lb/100gsm), Acid Free Art Sketchbook Artistic Drawing Painting Writing Paper for Kids Adults Beginners Artists",
  "Sharpie Creative Paint-like Brush Tip Acrylic Markers, Assorted Colors, Stocking Stuffers, 12 Count, Perfect for Art and Craft Supplies",
  "Crayola Clicks Retractable Tip Markers (10ct), Washable Art Marker Set, Coloring Markers for Kids, Stocking Stuffer for Kids, 3+",
  "Melissa & Doug Drawing Paper Pad (9 x 12 inches) - 50 Sheets, 3-Pack - FSC Certified",
  "Soucolor 72-Color Colored Pencils for Adult Coloring Books, Back to School Supplies, Soft Core Artist Sketching Drawing Pencils Drawing Supplies, Art Supplies Kit for Adults Kids, Coloring Pencils Set",
  "KALOUR 72 Count Colored Pencils for Adult Coloring Books, Soft Core,Ideal for Drawing Blending Shading,Color Pencils Set Gift for Adults Kids Beginners"
)

category_name <- "Arts and Crafts"

# Create an empty dataframe to store all reviews
all_product_reviews <- data.frame()

# Loop over each product URL
for (idx in seq_along(product_urls)) {
  url <- product_urls[idx]
  product_title <- product_titles[idx]
  
  # Initialize vectors to store individual review information for the current product
  reviewer_names <- character()
  review_dates <- character()
  review_comments <- character()
  verified_purchases <- character()
  star_ratings <- numeric()
  
  # Start scraping reviews, page by page
  page_number <- 1
  while(length(reviewer_names) < 2) {
    # Modify the URL to include the current page number
    paginated_url <- paste0(url, "?pageNumber=", page_number)
    
    try({
      # Read the HTML of the current page
      page_content <- read_html(paginated_url)
      
      # Extract all review sections from the page
      review_elements <- page_content %>%
        html_nodes(".review")
      
      # Extract reviewer names
      reviewer_names_page <- review_elements %>%
        html_nodes(".a-profile-name") %>%
        html_text(trim = TRUE)
      
      # Extract review dates
      review_dates_page <- review_elements %>%
        html_nodes(".review-date") %>%
        html_text(trim = TRUE)
      
      # Extract review comments
      review_comments_page <- review_elements %>%
        html_nodes(".review-text-content span") %>%
        html_text(trim = TRUE)
      
      # Extract verified purchase labels
      verified_purchases_page <- review_elements %>%
        html_nodes(".review-vp-label") %>%
        html_text(trim = TRUE)
      
      # Extract star ratings
      star_ratings_page <- review_elements %>%
        html_nodes(".a-icon-alt") %>%
        html_text(trim = TRUE) %>%
        str_extract("\\d\\.\\d") %>%  # Extract numeric rating (e.g., 4.5)
        as.numeric()
      
      # Append the collected review data to the vectors
      reviewer_names <- c(reviewer_names, reviewer_names_page)
      review_dates <- c(review_dates, review_dates_page)
      review_comments <- c(review_comments, review_comments_page)
      verified_purchases <- c(verified_purchases, verified_purchases_page)
      star_ratings <- c(star_ratings, star_ratings_page)
      
      # Increment the page number to fetch the next set of reviews
      page_number <- page_number + 1
    }, silent = TRUE)
    
    # Stop if we've collected at least 20 reviews
    if(length(reviewer_names) >= 2) {
      break
    }
  }
  
  # Limit the data to the first 20 reviews (if more were collected)
  max_reviews <- min(2, length(reviewer_names))
  reviewer_names <- reviewer_names[1:max_reviews]
  review_dates <- review_dates[1:max_reviews]
  review_comments <- review_comments[1:max_reviews]
  verified_purchases <- verified_purchases[1:max_reviews]
  star_ratings <- star_ratings[1:max_reviews]
  
  # Create a data frame for the current product's reviews with updated column names
  product_reviews <- data.frame(
    ProductCategory = rep(category_name, max_reviews),
    ProductName = rep(product_title, max_reviews),
    Reviewer = reviewer_names,
    ReviewDate = review_dates,
    Comment = review_comments,
    Rating = star_ratings,
    IsVerifiedPurchase = verified_purchases,
    stringsAsFactors = FALSE
  )
  
  # Append the current product's reviews to the master data frame
  all_product_reviews <- bind_rows(all_product_reviews, product_reviews)
}

# Print the compiled reviews data
print(all_product_reviews)

# Save the reviews to a CSV file for further analysis
write.csv(all_product_reviews, "ArtsNCrafts_Reviews.csv", row.names = FALSE)
```

```{r}
# Define the list of product URLs and corresponding names
product_urls <- c(
  "https://www.amazon.com/CRISONE-Clothes-Winter-Patchwork-Stylish/dp/B0CL5X9MQ8/ref=sr_1_1?dib=eyJ2IjoiMSJ9.QjJQQqF1sHKasClgj9t_zJpt26KvtzTxZw3bxRp5xVLZwNLEhRicLdxK481FrW3JsDzLQv4BFZ34cR4cpPVfGR021qBy_I85RZfi00nsOKnPjcyKgAwVLa8RCc3VKp7bHqFQCvGB87tjX4pbp5L6NN7F6YgIHtnOJ5OdK4HPElbH-ZzhJZqlczYF_cv1KT2mFIHR3e0FVsWetKz0BTjDEjxEntMBlxUlK-KBxc8Vp8vx9o8sk-AHADjQx-dFe_WgaPNbwl8ZC-nbe191ZxG9_jkIMn-0WH_n4muDA3PxBLI.q6SPgn_PLhRdFTAlxGrJV6p-kamaie1f04Wmf14dB3U&dib_tag=se&keywords=Toddler+Boy+Clothes+Letter+Print+Plaid+Shirts+Top%2BLong+Pants+2pcs+Fall+Winter+Outfit+Set&qid=1733152006&sr=8-1",
  "https://www.amazon.com/Toddler-Clothes-Outfits-Dinosaur-Printed/dp/B095HG1W5W/ref=sr_1_1?crid=2DM2JIXTYCLND&dib=eyJ2IjoiMSJ9.eMfovAajCTpiAKytv26p0U54UEUO2BXB5SJjRm4Nxjcrjn-OYt0KgR0aLXr8WamO8AqMjZ920c7WbFIOBcr74T_YVrzWZzhfpAfrEjvIY_2DHuCCt8hX2VPEX2trsE7_zv5QgSP3LI8VSmTjRdSSNz1vkhCbKMKWUUCr7RBizVMFDeB-L1OZBDp8nDA3VLM3-In4pcTBLqAScubMuBew16FbBqvfui5SyLL-baKTCro1oFkVzrsldiExDLn1GnqfXzQpRAKHfN4FZwd2eESWdnKIyvjWFOPNNVxfUGTmivA.bl5p-Dw4udWhwfkM5lDhb1GWRSi91k3cXQvCSqBqp-c&dib_tag=se&keywords=MIGU+Toddler+Boys+Clothes+Winter+Outfits+Dinosaur+Clothes+For+Boys+Printed+Long+Sleeve+Top%2BPants+2Pcs+Set&qid=1733152081&sprefix=migu+toddler+boys+clothes+winter+outfits+dinosaur+clothes+for+boys+printed+long+sleeve+top%2Bpants+2pcs+set%2Caps%2C275&sr=8-1",
  "https://www.amazon.com/Hind-4-Piece-T-Shirt-Athletic-Sweatpant/dp/B0C9SJ8PWR/ref=sr_1_1?crid=12J5HSBOLZ0YX&dib=eyJ2IjoiMSJ9.bP-QjaML-HJI4B8f7qBXy6sWswPGipso_wkx5-_WcWWpMHAZV2MpAXxA6xO5ibA2a4FZdQ9iAbX25wwApu8LDr5a332kDlxxtospquxiaWM7hrMRqJOO0NENMDxrYXKPRU8an90XUYrKnCtwiSb4xi2jb4CMkWn4X7yFtS9zRWSuqnr-g1DDsVnvFx8bOVullBW0yITBzFuGtXXy-K60Pj9jKlFONbpgJJ6XQPctjWeqR4xLQh5pbeiaAgrAvnRTOCU51Q2Mlk3sL9rUoglrUlIBSX4-FiMjMXERm8FRy-w.P2HPzth2VOvrhN0h0D4vZHXdLqnjjSNahwN8W75TozQ&dib_tag=se&keywords=Hind+Boys+4-Piece+Active+Long+Sleeve+Quick+Dry+T-Shirt+and+Athletic+Jogger+Sweatpant+Set+Kids+Clothes+for+Sports+and+Running&qid=1733152140&sprefix=hind+boys+4-piece+active+long+sleeve+quick+dry+t-shirt+and+athletic+jogger+sweatpant+set+kids+clothes+for+sports+and+running%2Caps%2C281&sr=8-1",
  "https://www.amazon.com/YuanLu-Suits-Tuxedo-Formal-Bearer/dp/B01NBN7FUJ/ref=sr_1_1?crid=1PURIYJRHKN8C&dib=eyJ2IjoiMSJ9.p27mo37gOxrtwNPhJ0TQq0aVQilc5YtSkLf8NTfDAf2QTQ8JrcH3nSQAQoF_5lCZ1-vOKrBj0y1ISGsFkUkWMsYc9j_u1JNscIO1wN0VzysowtaR5w7w48QWiry9-ZA31vlVdK9_OgeWrSG0N6UtotuVfewnFHgZq5XZDaE5fEIKUIzk71FsaM5lqclbJgT2A4AE3rrnXiyRJgSQ_7urYTGBzKu7vKMZVROjwKzylyn5BDJbQ-kZuOSbjrZ7nYck76kVK4Nm8vlu3YC9o5TaMtEFAW32t9ARYvYxctlgZ6I.amwvBX8qhl6yedgMlx-q4JCHjVU0_zKcQo_SgHXcEgg&dib_tag=se&keywords=YuanLu+Boys+Suit+for+Kids+Tuxedo+Wedding+Ring+Bearer+Outfit+Boy+Formal+Suits+5+Piece+Slim+Fit+Dresswear+Suit+Set&qid=1733152157&sprefix=yuanlu+boys+suit+for+kids+tuxedo+wedding+ring+bearer+outfit+boy+formal+suits+5+piece+slim+fit+dresswear+suit+set%2Caps%2C269&sr=8-1",
  "https://www.amazon.com/sspa/click?ie=UTF8&spc=MTo4NzkxOTg3Mjc5OTk3MjEwOjE3MzMxNTIxNzA6c3BfYXRmOjMwMDA2MTkyNzgxOTIwMjo6MDo6&url=%2FPURE-CHAMP-Sweatpants-Athletic-Drawstring%2Fdp%2FB0C8LPG548%2Fref%3Dsr_1_1_sspa%3Fcrid%3D578B51PRW150%26dib%3DeyJ2IjoiMSJ9.MrjFQXeNox-N-A_f2GHtVm6fzpFYwD6cNPLir7FA3F6FSsLpVxl2r8jU72aeZL-r5YzWydyUdvZaYOk_TlBwD0Y22GF6pdLTa6QC6bBBc-fCy6UjRyQo_x6F9WtQ6EcpzorqSFeXzuphzAnRJ-EjNg46EVU3acC6VKXWNNpeQc_ya_h3zy1J6AumUsv-xuUk_4Uw0rmkWZpjHT8kVmlKY5rVWIpqodmh5Rbpf5jGdicPjfKnuQ1SF8p1ndDOBM5MK-GK0o8UY92ndyqM0AZvvDYxJO3J18yAscWiI3O645A.tABihEqFLGdpX_ET9-zFXIyPEYsxLRY4ndZ7trpFKqc%26dib_tag%3Dse%26keywords%3DPURE%2BCHAMP%2B3Pk%2BBoys%2BSweatpants%2BFleece%2BAthletic%2BWorkout%2BKids%2BClothes%2BBoys%2BJoggers%2Bwith%2BZipper%2BPocket%2Band%2BDrawstring%2BSize%2B4-20%26qid%3D1733152170%26sprefix%3Dpure%2Bchamp%2B3pk%2Bboys%2Bsweatpants%2Bfleece%2Bathletic%2Bworkout%2Bkids%2Bclothes%2Bboys%2Bjoggers%2Bwith%2Bzipper%2Bpocket%2Band%2Bdrawstring%2Bsize%2B4-20%252Caps%252C269%26sr%3D8-1-spons%26sp_csd%3Dd2lkZ2V0TmFtZT1zcF9hdGY%26psc%3D1",
  "https://www.amazon.com/Nike-Performance-Cushioned-Training-Technology/dp/B072HNJY8M/ref=sr_1_1?crid=1LDJPRNNDFCKX&dib=eyJ2IjoiMSJ9.fbxNLZ8dRVOe4OEih6vwT7bcN7iro-YsutiPjxEcwUpqypeW1Dsh7W9X9PRCTnJtV2ODRPeYjGSxao8nNAyEZdsdkTt9n19GUQSbzPX9xSVSQ9_uV0g6nZSL_-O4tC2WlJ67c9zRP1CNWPtAVUwr8dwkYhxTP252Vshtl0QYWwswlaNO9J8AWzSxUokAN7LG4BxI5vCaeg1Izu7RRT7CE5Jdn2D-lKic6ZSFndeTy-yn5GOyg1Yz-PBydNeeIlfMmPNpmKCeUEXqeRO2ZIgczRhXwJI0Mrn3QvQ3wBy76tk._jmqwr8Vksqig8eBTkR_hSWICkrRP-LYiV9hv-15IPc&dib_tag=se&keywords=Nike+Kids%27+Everyday+Cushion+Crew+Socks+%286+Pairs%29&qid=1733152185&sprefix=nike+kids%27+everyday+cushion+crew+socks+6+pairs+%2Caps%2C279&sr=8-1",
  "https://www.amazon.com/Hanes-Toddler-Underwear-Comfort-10-Pack/dp/B07TFQZM56/ref=sr_1_1?crid=2DYL1K18BH7UR&dib=eyJ2IjoiMSJ9.9AKwQ-cDJ6UAAmkLFUnGChWsxW3uFOXZp1kaI5LbCYLbdGLBJIVF0Sr1gMBmZUe_4i4NFK6k2mneXIczsSlqyAdZBJvb2XIP9WA5GoSkHdohGnJl6jMjE2dNiKnKSNGF23bP6AtcCVlwj_HDfx-v4t_gLsUCK3ytN0mm7lsaSgim47M6Pebfr3tSX_zAGuIL9zoBplsnVyryTHIuCq2Z4AHZaLgXfRh1zHhFADIULIMEjXuY9loFLDw7QNg8yJwkdnvM1XpqutNqy5A3YFB3FNJmRnsWYdZ-ztwFVnCldj4.Y6X162eI6mMtUELF2E73KuNOroznhXXFcWDundJDRc4&dib_tag=se&keywords=Hanes+Boys%27+and+Toddler+Underwear%2C+Comfort+Flex+and+Comfortsoft+Boxer+Briefs%2C+Multiple+Packs+Available+pack+of+10&qid=1733152200&sprefix=hanes+boys%27+and+toddler+underwear%2C+comfort+flex+and+comfortsoft+boxer+briefs%2C+multiple+packs+available+pack+of+10%2Caps%2C303&sr=8-1",
  "https://www.amazon.com/Nike-Unisex-Kids-6-Pack-Socks/dp/B08CX18SZX/ref=sr_1_2?crid=3EX3RI5UDEFID&dib=eyJ2IjoiMSJ9.4KEmbGY7OW54f7FofpnGuXP0wU2rQHadawhPh6QeZVh4mVR5_vlS8J89XpqECR4aTGaHQgQkgxf-Kjy9PeNOHIVx2D3HSsgALR9jqsUpMS-KaWMqSOlRH3bck1yaINWw2TRQj8aMGKOl4Arc3AUzHSJ0zuCGmx4ccxTnfto1C52wtpJioFdO4PyYEvrYYsWNtCRLZyfFLMzY98xFD7-rgPc-LvgPH_PbGitRSdwZZmqnwzNieENjcwT_FYmunrOCttWXJT0uo5PSm-yW_zNEW7qt7T7qkkWmsTVvM7swnHU.8VogHh_RDc-WjxLILe04s4TEuzbgwTcDFUeioDFsV5o&dib_tag=se&keywords=Nike+Kids%27+Crew+Socks&qid=1733152242&sprefix=nike+kids%27+crew+socks%2Caps%2C393&sr=8-2",
  "https://www.amazon.com/adidas-Boys-Tricot-Iconic-Collegiate/dp/B06XHSJJVC/ref=sr_1_1?crid=31FBTD78YUZBC&dib=eyJ2IjoiMSJ9.sapDRivMp2Sjc575MV2s9cjPQaH4K1TuEiUoXIkFNf978hO6NrgoOHlVhSMTzlF0oU73CTv9UPJluUCY4cxNekbH7p59sf49qdq1dxO2rj9A2zHyrXSZNTUVCSYvHN-3e8jzhnjrrKC9PMSjnsr7M8mhTdF0uDypD5sUlzeVQ6YSh31fsTfS-9VN9vpne2o6WnehRTOjmmQwFAI8VZ10m5K6RmLcrpUzlbqbA7qy42MpOmr-CdbkARs07xNjrmYHzrwTDcmfN_D9mEo7lV941DlaF1Sraqiivz9JTP8VTZ4.iQUvrFkdn24ub1Eu3NlT8VHaoIDGdRGRX45TsxyM1xw&dib_tag=se&keywords=adidas+Boys%27+Big+Active+Sports+Athletic+Tricot+Jogger+Pant&qid=1733152265&sprefix=adidas+boys%27+big+active+sports+athletic+tricot+jogger+pant%2Caps%2C289&sr=8-1",
  "https://www.amazon.com/Hanes-Stretch-Comfortable-Cushioned-12-Pack/dp/B00S4GMSOI/ref=sr_1_1?crid=1XR9FROVCXGWV&dib=eyJ2IjoiMSJ9.nXYcVIdsdUuVKNvKcoCSdq-_kcQAQ7mjIQQWWyArrwcTuKDAbTXAU37pzR8lGPnj3u6odN02EaAYYIuMEY_O0eHcjjwPJNaTlNMziqR4wBfjppihVuDJb0cT4GNv9XU7WcTOso4uZ8J5qNim2fwiskKpKCQDV_VaHS5YrDVLi-jDqGAvYVCxj3_KMwdudWILm42Rm5941KhYyl88ijhw8PYD-hC06Xj2eijyBDTCzRhD4leoOe1vXRVG3iuPxJbgFY9MEeJsMSslp7snpX71pl5uCk6lbrRe6NkUNbnUJJU.3WcYpDNlcaGzoJT2z0KIvwxZnymlUUfC0jfWqnaTtjY&dib_tag=se&keywords=Hanes+Boys%27+Socks%2C+Double+Tough+Cushioned+Crew+Socks%2C+12-pair+Packs&qid=1733152279&sprefix=hanes+boys%27+socks%2C+double+tough+cushioned+crew+socks%2C+12-pair+packs%2Caps%2C280&sr=8-1"
)

product_titles <- c(
  "Toddler Boy Clothes Letter Print Plaid Shirts Top+Long Pants 2pcs Fall Winter Outfit Set",
  "MIGU Toddler Boys Clothes Winter Outfits Dinosaur Clothes For Boys Printed Long Sleeve Top+Pants 2Pcs Set",
  "Hind Boys 4-Piece Active Long Sleeve Quick Dry T-Shirt and Athletic Jogger Sweatpant Set Kids Clothes for Sports and Running",
  "YuanLu Boys Suit for Kids Tuxedo Wedding Ring Bearer Outfit Boy Formal Suits 5 Piece Slim Fit Dresswear Suit Set",
  "PURE CHAMP 3Pk Boys Sweatpants Fleece Athletic Workout Kids Clothes Boys Joggers with Zipper Pocket and Drawstring Size 4-20",
  "Nike Kids' Everyday Cushion Crew Socks (6 Pairs)",
  "Hanes Boys' and Toddler Underwear, Comfort Flex and Comfortsoft Boxer Briefs, Multiple Packs Available pack of 10",
  "Nike Kids' Crew Socks",
  "adidas Boys' Big Active Sports Athletic Tricot Jogger Pant",
  "Hanes Boys' Socks, Double Tough Cushioned Crew Socks, 12-pair Packs"
)

category_name <- "Boys Clothing"

# Create an empty dataframe to store all reviews
all_product_reviews <- data.frame()

# Loop over each product URL
for (idx in seq_along(product_urls)) {
  url <- product_urls[idx]
  product_title <- product_titles[idx]
  
  # Initialize vectors to store individual review information for the current product
  reviewer_names <- character()
  review_dates <- character()
  review_comments <- character()
  verified_purchases <- character()
  star_ratings <- numeric()
  
  # Start scraping reviews, page by page
  page_number <- 1
  while(length(reviewer_names) < 2) {
    # Modify the URL to include the current page number
    paginated_url <- paste0(url, "?pageNumber=", page_number)
    
    try({
      # Read the HTML of the current page
      page_content <- read_html(paginated_url)
      
      # Extract all review sections from the page
      review_elements <- page_content %>%
        html_nodes(".review")
      
      # Extract reviewer names
      reviewer_names_page <- review_elements %>%
        html_nodes(".a-profile-name") %>%
        html_text(trim = TRUE)
      
      # Extract review dates
      review_dates_page <- review_elements %>%
        html_nodes(".review-date") %>%
        html_text(trim = TRUE)
      
      # Extract review comments
      review_comments_page <- review_elements %>%
        html_nodes(".review-text-content span") %>%
        html_text(trim = TRUE)
      
      # Extract verified purchase labels
      verified_purchases_page <- review_elements %>%
        html_nodes(".review-vp-label") %>%
        html_text(trim = TRUE)
      
      # Extract star ratings
      star_ratings_page <- review_elements %>%
        html_nodes(".a-icon-alt") %>%
        html_text(trim = TRUE) %>%
        str_extract("\\d\\.\\d") %>%  # Extract numeric rating (e.g., 4.5)
        as.numeric()
      
      # Append the collected review data to the vectors
      reviewer_names <- c(reviewer_names, reviewer_names_page)
      review_dates <- c(review_dates, review_dates_page)
      review_comments <- c(review_comments, review_comments_page)
      verified_purchases <- c(verified_purchases, verified_purchases_page)
      star_ratings <- c(star_ratings, star_ratings_page)
      
      # Increment the page number to fetch the next set of reviews
      page_number <- page_number + 1
    }, silent = TRUE)
    
    # Stop if we've collected at least 20 reviews
    if(length(reviewer_names) >= 2) {
      break
    }
  }
  
  # Limit the data to the first 20 reviews (if more were collected)
  max_reviews <- min(2, length(reviewer_names))
  reviewer_names <- reviewer_names[1:max_reviews]
  review_dates <- review_dates[1:max_reviews]
  review_comments <- review_comments[1:max_reviews]
  verified_purchases <- verified_purchases[1:max_reviews]
  star_ratings <- star_ratings[1:max_reviews]
  
  # Create a data frame for the current product's reviews with updated column names
  product_reviews <- data.frame(
    ProductCategory = rep(category_name, max_reviews),
    ProductName = rep(product_title, max_reviews),
    Reviewer = reviewer_names,
    ReviewDate = review_dates,
    Comment = review_comments,
    Rating = star_ratings,
    IsVerifiedPurchase = verified_purchases,
    stringsAsFactors = FALSE
  )
  
  # Append the current product's reviews to the master data frame
  all_product_reviews <- bind_rows(all_product_reviews, product_reviews)
}

# Print the compiled reviews data
print(all_product_reviews)

# Save the reviews to a CSV file for further analysis
write.csv(all_product_reviews, "BoysClothing_Reviews.csv", row.names = FALSE)
```

```{r}
# Define the list of product URLs and corresponding names
product_urls <- c(
  "https://www.amazon.com/sspa/click?ie=UTF8&spc=MTo3NDEwMjYyMDM2NjEyMzE0OjE3MzMxNTI4ODk6c3BfYXRmOjMwMDE4MTc0NzQzMTgwMjo6MDo6&url=%2FGoogle-Pixel-Tablet-Android-Extra-Long%2Fdp%2FB0CZM9N4ZS%2Fref%3Dsr_1_1_sspa%3Fcrid%3D2C34WJIIVT2QF%26dib%3DeyJ2IjoiMSJ9.bCxbfjmbwFVhyWjgNnRNXrE0Dv10dwGoKDDAmCgz8YlcCsUK5d9j-qkvegrXybvkjuweEHVsCAWji9s6OSi2_NW0xLoaN9GLZcRz3itxR8rvysrikW0eaLtxKCC7kFRbAXBJpdzwAqlDJq4j2LDstCaECF72AAcZyrTPKSRPmHlf37TcUFtKG_GY_NTXwcBk_HkQhX8BCnzD8TtBbvfJsj0A0qLXAIbpPJZ2_gx7bX4.QMvl2X7pRF9Y8coZoFCykiebAchDKnk84QsKctBVtGw%26dib_tag%3Dse%26keywords%3DGoogle%2BPixel%2BTablet%2B-%2BAndroid%2BTablet%2Bwith%2B11-Inch%2BScreen%2Band%2BExtra-Long%2BBattery%2BLife%2B-%2BHazel%2B-%2B8%2BGB%2BRAM%2B-%2B128%2BGB%26qid%3D1733152889%26sprefix%3Dgoogle%2Bpixel%2Btablet%2B-%2Bandroid%2Btablet%2Bwith%2B11-inch%2Bscreen%2Band%2Bextra-long%2Bbattery%2Blife%2B-%2Bhazel%2B-%2B8%2Bgb%2Bram%2B-%2B128%2Bgb%252Caps%252C508%26sr%3D8-1-spons%26sp_csd%3Dd2lkZ2V0TmFtZT1zcF9hdGY%26psc%3D1",
  "https://www.amazon.com/SAMSUNG-Dust-Resistant-Powerful-Processor-Lightweight/dp/B0CCBWYZKY/ref=sr_1_1?crid=F2CFV4BYY6MN&dib=eyJ2IjoiMSJ9.bv1ZLRfttGTD-VNKfgWvbsg_jyC-cCub_WFr_sNLDPKnEVuPngGssSSSS-YNKXm_pPcM6xTyVaoRHawpe9sR7dBrKMotKdNgDtcx-zq3XDvSLczhy6EOlZMWQetnGI6HsGdQXuKUkrr-nOvoK9mUbN9Zwww5F6UiVy0SF5pRSpuRAnWIKkoD-JKhfAtm6jZonBQe62ZnkOonpGBM3KqmeKvE_BPlne3BWWqYSJyVvKk.xicFHDhhhT3gK-57gZ4l38hKo8eNt2l8WQeS-eqmVjo&dib_tag=se&keywords=Samsung+Galaxy+Tab+S9+FE%2B+Plus+12.4%C3%A2%E2%82%AC%C2%9D+128GB+Android+Tablet%2C+Long+Battery+Life%2C+Powerful+Processor%2C+S+Pen%2C+8MP+Camera%2C+Lightweight+Durable+Design%2C+Expandable+Storage%2C+US+Version%2C+2023%2C+Lavender&qid=1733152963&sprefix=samsung+galaxy+tab+s9+fe%2B+plus+12.4%C3%A2+128gb+android+tablet%2C+long+battery+life%2C+powerful+processor%2C+s+pen%2C+8mp+camera%2C+lightweight+durable+design%2C+expandable+storage%2C+us+version%2C+2023%2C+lavender%2Caps%2C409&sr=8-1",
  "https://www.amazon.com/SAMSUNG-Android-Speakers-Upgraded-Chipset/dp/B0CLF4NVSL/ref=sr_1_1?crid=28YAAVVLF7HPC&dib=eyJ2IjoiMSJ9.LQxqdBu3HvVY2v5Bt8uU4dGTfF4P6VrAwv8A0cbkjCGh6Quqye-G9xbqeePyvgkE6UKu64dLXTUix32doajCgS6GO45MK7f0lXBBLK89oTzvgOojtlmx6E2ejhu6WldrVcHjWuclY2xKyVPbf1_eTuAfotJmJKSkuq4hQ0gbbsAOoMw6jdCKUEpdhZfZ2vjSbly1fm5dZMWrMQl7PqEFYGljHT_YglVGfAC51SN0ELg.vTzLXNUwiaO3MFJfMIw_BiK1X88LQn0EEAQkU_H7bAw&dib_tag=se&keywords=Samsung+Galaxy+Tab+A9%2B+Plus+11%C3%A2%E2%82%AC%C2%9D+64GB+Android+Tablet%2C+Big+Screen%2C+Quad+Speakers%2C+Upgraded+Chipset%2C+Multi+Window+Display%2C+Slim%2C+Light%2C+Durable%2C+Kids+Friendly+Design%2C+US+Version%2C+2024%2C+Silver&qid=1733152993&sprefix=samsung+galaxy+tab+a9%2B+plus+11%C3%A2+64gb+android+tablet%2C+big+screen%2C+quad+speakers%2C+upgraded+chipset%2C+multi+window+display%2C+slim%2C+light%2C+durable%2C+kids+friendly+design%2C+us+version%2C+2024%2C+silver%2Caps%2C270&sr=8-1",
  "https://www.amazon.com/SAMSUNG-Android-Snapdragon-International-Graphite/dp/B0D5JTC65V/ref=sr_1_2?crid=158RVSKFOVZ0E&dib=eyJ2IjoiMSJ9.LQxqdBu3HvVY2v5Bt8uU4Swz-zOWUDKIytDH1JGpT9IdCy3kOUKuLO6lqmQ8O-id3bT98MybBANl2v_iC4Img_Jh5HhZasw2MwCLGquaRfQKRQDDOON3Q9URX9kpWPCr5a1h02OfnV8wone8No5Vlz84mF8nnjoJbj_8Kii44G_X2o_Y3wzDUAoxygOBfHbToLbgmWCfopkvWd6QMBjuJpwLfmh3_nl-XZp2pm1hATA.MhoIIKdOYVMlVCBHc8hXJbbnG9lLGOl3lrcfx9WQyE0&dib_tag=se&keywords=Samsung+Galaxy+Tab+A9%2B+Tablet+11%C3%A2%E2%82%AC%C2%9D+64GB+Android+Tablet%2C+Big+Screen%2C+Quad+Speakers%2C+Upgraded+Chipset%2C+Multi+Window+Display%2C+Slim%2C+Light%2C+Durable+Design%2C+US+Version%2C+2024%2C+Graphite&qid=1733153017&sprefix=samsung+galaxy+tab+a9%2B+tablet+11%C3%A2+64gb+android+tablet%2C+big+screen%2C+quad+speakers%2C+upgraded+chipset%2C+multi+window+display%2C+slim%2C+light%2C+durable+design%2C+us+version%2C+2024%2C+graphite%2Caps%2C265&sr=8-2",
  "https://www.amazon.com/ASUS-ROG-Strix-Gaming-Laptop/dp/B0CRDCXRK2/ref=sr_1_1?crid=2HAV2UJV69PS8&dib=eyJ2IjoiMSJ9.30h2K-IhMMbc5mZ8nJRrNFKrA35EPQ3Xn9kj6a28FMKxAW7xNHmPrkB1QeI0Dh0XX9ymixkULjRjSG27QISRTdAaYbdM-ygq3F8gVkhnJdCleJ1sI5Wa7JNWlZgxPyMPfIsDQku6kPn8qI2ICYvb4RKQpu6Ha-haXnTzJ4sGpE6hRhaT85ShxcMprTJfOuRxSEF3wg1xuKEMPTaCz_3m0xksfxf0yxGH914xesv4nuk.rr-tdoV87A_kKclyrUhgc4H6ogYygyYQkpA7hPHykNo&dib_tag=se&keywords=ASUS+ROG+Strix+G16+%282024%29+Gaming+Laptop%2C+16%C3%A2%E2%82%AC%C2%9D+16%3A10+FHD+165Hz+Display%2C+NVIDIA%C3%82%C2%AE+GeForce+RTX%C3%A2%E2%80%9E%C2%A2+4060%2C+Intel+Core+i7-13650HX%2C+16GB+DDR5%2C+1TB+PCIe+Gen4+SSD%2C+Wi-Fi+6E%2C+Windows+11%2C+G614JV-AS74&qid=1733153070&sprefix=asus+rog+strix+g16+2024+gaming+laptop%2C+16%C3%A2+16+10+fhd+165hz+display%2C+nvidia%C3%A2+geforce+rtx%C3%A2+4060%2C+intel+core+i7-13650hx%2C+16gb+ddr5%2C+1tb+pcie+gen4+ssd%2C+wi-fi+6e%2C+windows+11%2C+g614jv-as74%2Caps%2C272&sr=8-1",
  "https://www.amazon.com/Display-i3-N305-Graphics-Windows-AG15-31P-3947/dp/B0CV5ZSR17/ref=sr_1_1?crid=3CYDUY3QIHKO0&dib=eyJ2IjoiMSJ9.QCtsWMvwT-npZK8kPw0tVLN5xQkgZLN3ljhttoq8aALp1PC6XI0feAh-QyKFNNLdEzkSGNpjTyDxldHWc61OL9PKtw9wbfkCNhykMyZv6zm4pK21bi5hR63ktRFlA7-y0rd4L4113mmgw66uJqhXXpeGsoKLLKeDZXSHB_XJojvEDBDdsZQBSiOxmiZvfMqz3JThE21FvULvKEJhipvicaZlGgfPIgzw5aKURsiZdnEoFukuH_evB5ANnSGFZctBJAYvqc2f13GSaxY9KHYLXdtxLQ0iE1RqanmP7V3-mJ4.yIqo6APu61Bfi0a5GKxX1nQlxGvZQ2Vp63WDy89RWZM&dib_tag=se&keywords=Acer+Aspire+Go+15+Slim+Laptop+%7C+15.6%22+Full+HD+IPS+1080P+Display+%7C+Intel+Core+i3-N305%7C+Intel+UHD+Graphics+%7C+8GB+LPDDR5+%7C+128GB+HD+%7C+Wi-Fi+6+%7C+AI+PC+%7C+Windows+11+Home+in+S+Mode+%7C+AG15-31P-3947&qid=1733153357&sprefix=acer+aspire+go+15+slim+laptop+15.6+full+hd+ips+1080p+display+intel+core+i3-n305+intel+uhd+graphics+8gb+lpddr5+128gb+hd+wi-fi+6+ai+pc+windows+11+home+in+s+mode+ag15-31p-3947%2Caps%2C562&sr=8-1",
  "https://www.amazon.com/ASUS-Chromebook-Processor-Transparent-CX1400CKA-AS88F/dp/B0CRTJ1LZ4/ref=sr_1_1?crid=2E115USCCVB18&dib=eyJ2IjoiMSJ9.zDBFdx508_PlhHz0LpW6JW8SRaIufaEXrGAQUisVV8b7b3nhddQri2UqIJ6zRupk4QZOQgUeQ6S1f0suNY0vr1Lm3DL9zyeJiBdU5mCrjoN6GRu9YW8SpfoCTi2HT_kHYveNrgWlW71C6UsxK_aZMqzgPab1hwS8Jq_Ur2IEBqSaKAIwCjIk4lj_C8y_ld7R6e81_sJOlRRFiyoDbCiKyQcDbWeps_ajGr1G1n8yqwc.wJc4bCYe-FmDq4pbq42_akDi2aZqqJu1d_HHl0Xbih4&dib_tag=se&keywords=ASUS+Chromebook+CX1%2C+14%22+FHD%2C+Intel%C3%82%C2%AE+Celeron+N4500+Processor%2C+64GB+Storage%2C+4GB+RAM%2C+ChromeOS%2C+Transparent+Silver%2C+CX1400CKA-AS44F&qid=1733153395&sprefix=asus+chromebook+cx1%2C+14+fhd%2C+intel%C3%A2+celeron+n4500+processor%2C+64gb+storage%2C+4gb+ram%2C+chromeos%2C+transparent+silver%2C+cx1400cka-as44f%2Caps%2C261&sr=8-1",
  "https://www.amazon.com/SAMSUNG-Dust-Resistant-Powerful-Processor-Lightweight/dp/B0CCX11JT6/ref=sr_1_1?crid=3IJLVZ1BC3HOE&dib=eyJ2IjoiMSJ9.f-rCdjzG26M-1Awcv3IHlHpzq__mbecNwbI6XA8ODuehsxL-2GFcTF4AUdW2iOhFmNPLvS0kMO5lJhbjmb-sDjVULDDmBuGb8wMOBktLI5ENX4XedyHQr6OasNYGAQaXjngFWyq2BJbY-H0YJHPRAyJiiKYtKeQLA_31qCjH9-Bitub6ooGp47U7xDW3at5oreHJkUxfdNgALRg4UFQljkIobSFD_iFdqhzz1tQgnFM.d0gK_8ORjlLcbe6ZuVa-5zdarH7zAN-DhcY8J8wPHao&dib_tag=se&keywords=Samsung+Galaxy+Tab+S9+FE+10.9%C3%A2%E2%82%AC%C2%9D+128GB+WiFi+Android+Tablet%2C+Large+Display%2C+Long+Battery+Life%2C+Powerful+Processor%2C+S+Pen%2C+8MP+Camera%2C+Lightweight+Durable+Design%2C+Expandable+Storage%2C+US+Version%2C2023%2C+Gray&qid=1733153450&sprefix=samsung+galaxy+tab+s9+fe+10.9%C3%A2+128gb+wifi+android+tablet%2C+large+display%2C+long+battery+life%2C+powerful+processor%2C+s+pen%2C+8mp+camera%2C+lightweight+durable+design%2C+expandable+storage%2C+us+version%2C2023%2C+gray%2Caps%2C286&sr=8-1",
  "https://www.amazon.com/HP-Generation-i3-1215U-Graphics-14-dq5009nr/dp/B0CS3XPZNH/ref=sr_1_1?crid=319LMEVV0YE7Y&dib=eyJ2IjoiMSJ9.3Fw5L3M4sEd9uThIfdrtmgHIDnUjaytrs77e0l9njyzTpyqsl3PJFzTfmgDNPwXE6vLfjgCjGdbCLq2e0blfFnjnJLeyTV6CScTwmdMqaE_yGGMTjyqx-4OSipEPO90bcF2Uvv1DW4mk6OsTJRqffzrP1wQQEeOasXcjonWQ5a9cVD-0g2fVZCHBcX2Drvu8lM8aSMifV9mXADvd8WE0p2dbQSYK_NelAtWYWyOYq-U.SeEvSBiHDCbWd1rbc_vSxzmtfiPsHaSgwRJ7kaDVE-s&dib_tag=se&keywords=HP+14+inch+Laptop%2C+HD+Display%2C+12th+Generation+Intel+Core+i3-1215U%2C+8+GB+RAM%2C+256+GB+SSD%2C+Intel+UHD+Graphics%2C+Windows+11+Home+in+S+Mode%2C+14-dq5009nr+%282024%29&qid=1733153468&sprefix=hp+14+inch+laptop%2C+hd+display%2C+12th+generation+intel+core+i3-1215u%2C+8+gb+ram%2C+256+gb+ssd%2C+intel+uhd+graphics%2C+windows+11+home+in+s+mode%2C+14-dq5009nr+2024+%2Caps%2C311&sr=8-1",
  "https://www.amazon.com/Lenovo-3i-Chromebook-Everyday-Notebook/dp/B0BSJ46KY9/ref=sr_1_1?crid=30GYCEJOK2R5&dib=eyJ2IjoiMSJ9.3utIyyBV91uO31pdNTXYQLfl43bwJSCGRBgCzo2xAybUAlziLhyIvpb-PtJhfBb23Z222KqFzQA3xNy-3X2BEW1W756OxoQroI72li06fc9-APqznJqblrlEL-ff6qpOfEj3UkNx9mg3druoXGU30AiQ2rjEoTbPC_utQE5VM9JWXy93Qaxv7K8OxpDM0_cFjNQWoi0TjfHZVfRuGIs_ys5ZN12qBMNl9WRj6d2vDS4.t4vYZx4yft-ZUmapBBkGdyh1ktjPYwyYne4ocL-xOPE&dib_tag=se&keywords=Lenovo+IdeaPad+3i+Chromebook%2C+15.6%C3%A2%E2%82%AC%C2%9D+FHD+Display%2C+Intel+Celeron+N4500%2C+8GB+RAM%2C+64GB+eMMC%2C+1920x1080+px%2C+720p+Camera%2C+Chrome+OS%2C+Abyss+Blue&qid=1733153612&sprefix=lenovo+ideapad+3i+chromebook%2C+15.6%C3%A2+fhd+display%2C+intel+celeron+n4500%2C+8gb+ram%2C+64gb+emmc%2C+1920x1080+px%2C+720p+camera%2C+chrome+os%2C+abyss+blue%2Caps%2C577&sr=8-1"
)

product_titles <- c(
  "Google Pixel Tablet - Android Tablet with 11-Inch Screen and Extra-Long Battery Life - Hazel - 8 GB RAM - 128 GB",
  "Samsung Galaxy Tab S9 FE+ Plus 12.4â€ 128GB Android Tablet, Long Battery Life, Powerful Processor, S Pen, 8MP Camera, Lightweight Durable Design, Expandable Storage, US Version, 2023, Lavender",
  "Samsung Galaxy Tab A9+ Plus 11â€ 64GB Android Tablet, Big Screen, Quad Speakers, Upgraded Chipset, Multi Window Display, Slim, Light, Durable, Kids Friendly Design, US Version, 2024, Silver",
  "Samsung Galaxy Tab A9+ Tablet 11â€ 64GB Android Tablet, Big Screen, Quad Speakers, Upgraded Chipset, Multi Window Display, Slim, Light, Durable Design, US Version, 2024, Graphite",
  "ASUS ROG Strix G16 (2024) Gaming Laptop, 16â€ 16:10 FHD 165Hz Display, NVIDIAÂ® GeForce RTXâ„¢ 4060, Intel Core i7-13650HX, 16GB DDR5, 1TB PCIe Gen4 SSD, Wi-Fi 6E, Windows 11, G614JV-AS74",
  "Acer Aspire Go 15 Slim Laptop | 15.6 Full HD IPS 1080P Display | Intel Core i3-N305| Intel UHD Graphics | 8GB LPDDR5 | 128GB HD | Wi-Fi 6 | AI PC | Windows 11 Home in S Mode | AG15-31P-3947",
  "ASUS Chromebook CX1, 14 FHD, IntelÂ® Celeron N4500 Processor, 64GB Storage, 4GB RAM, ChromeOS, Transparent Silver, CX1400CKA-AS44F",
  "Samsung Galaxy Tab S9 FE 10.9â€ 128GB WiFi Android Tablet, Large Display, Long Battery Life, Powerful Processor, S Pen, 8MP Camera, Lightweight Durable Design, Expandable Storage, US Version,2023, Gray",
  "HP 14 inch Laptop, HD Display, 12th Generation Intel Core i3-1215U, 8 GB RAM, 256 GB SSD, Intel UHD Graphics, Windows 11 Home in S Mode, 14-dq5009nr (2024)",
  "Lenovo IdeaPad 3i Chromebook, 15.6â€ FHD Display, Intel Celeron N4500, 8GB RAM, 64GB eMMC, 1920x1080 px, 720p Camera, Chrome OS, Abyss Blue"
)

category_name <- "Computers and Tablets"

# Create an empty dataframe to store all reviews
all_product_reviews <- data.frame()

# Loop over each product URL
for (idx in seq_along(product_urls)) {
  url <- product_urls[idx]
  product_title <- product_titles[idx]
  
  # Initialize vectors to store individual review information for the current product
  reviewer_names <- character()
  review_dates <- character()
  review_comments <- character()
  verified_purchases <- character()
  star_ratings <- numeric()
  
  # Start scraping reviews, page by page
  page_number <- 1
  while(length(reviewer_names) < 2) {
    # Modify the URL to include the current page number
    paginated_url <- paste0(url, "?pageNumber=", page_number)
    
    try({
      # Read the HTML of the current page
      page_content <- read_html(paginated_url)
      
      # Extract all review sections from the page
      review_elements <- page_content %>%
        html_nodes(".review")
      
      # Extract reviewer names
      reviewer_names_page <- review_elements %>%
        html_nodes(".a-profile-name") %>%
        html_text(trim = TRUE)
      
      # Extract review dates
      review_dates_page <- review_elements %>%
        html_nodes(".review-date") %>%
        html_text(trim = TRUE)
      
      # Extract review comments
      review_comments_page <- review_elements %>%
        html_nodes(".review-text-content span") %>%
        html_text(trim = TRUE)
      
      # Extract verified purchase labels
      verified_purchases_page <- review_elements %>%
        html_nodes(".review-vp-label") %>%
        html_text(trim = TRUE)
      
      # Extract star ratings
      star_ratings_page <- review_elements %>%
        html_nodes(".a-icon-alt") %>%
        html_text(trim = TRUE) %>%
        str_extract("\\d\\.\\d") %>%  # Extract numeric rating (e.g., 4.5)
        as.numeric()
      
      # Append the collected review data to the vectors
      reviewer_names <- c(reviewer_names, reviewer_names_page)
      review_dates <- c(review_dates, review_dates_page)
      review_comments <- c(review_comments, review_comments_page)
      verified_purchases <- c(verified_purchases, verified_purchases_page)
      star_ratings <- c(star_ratings, star_ratings_page)
      
      # Increment the page number to fetch the next set of reviews
      page_number <- page_number + 1
    }, silent = TRUE)
    
    # Stop if we've collected at least 20 reviews
    if(length(reviewer_names) >= 2) {
      break
    }
  }
  
  # Limit the data to the first 20 reviews (if more were collected)
  max_reviews <- min(2, length(reviewer_names))
  reviewer_names <- reviewer_names[1:max_reviews]
  review_dates <- review_dates[1:max_reviews]
  review_comments <- review_comments[1:max_reviews]
  verified_purchases <- verified_purchases[1:max_reviews]
  star_ratings <- star_ratings[1:max_reviews]
  
  # Create a data frame for the current product's reviews with updated column names
  product_reviews <- data.frame(
    ProductCategory = rep(category_name, max_reviews),
    ProductName = rep(product_title, max_reviews),
    Reviewer = reviewer_names,
    ReviewDate = review_dates,
    Comment = review_comments,
    Rating = star_ratings,
    IsVerifiedPurchase = verified_purchases,
    stringsAsFactors = FALSE
  )
  
  # Append the current product's reviews to the master data frame
  all_product_reviews <- bind_rows(all_product_reviews, product_reviews)
}

# Print the compiled reviews data
print(all_product_reviews)

# Save the reviews to a CSV file for further analysis
write.csv(all_product_reviews, "ComputersNTablets_Reviews.csv", row.names = FALSE)
```

```{r}
# Define the list of product URLs and corresponding names
product_urls <- c(
  "https://www.amazon.com/Generic-Dog-Water-Bottle-Portable/dp/B0DBVZL495/ref=sr_1_1?dib=eyJ2IjoiMSJ9.YmkrGMPXu-bdKkfXNnMDPfjsU83MdiqAtHXb6MtPrI0A8Bcm_mnDVKWZEMaVr1uHhWvcMcUDR3F0Xhx3xjHRGkXznJ7gdk18tExKzSkFXwcza8fvvR632MUy3VzTRhIvx3_p6xvB92Sf1lyXyIwVhK7vEYDPAt40uupoIy07-rk7GsTXob60m39huYP4OD7fPSFqfZHv2QWwdngpT0axHtGPFvyceV3gVgSwPo1JiPzQZpLT3QBxFz98KqIBanPprHxLsW8MTuew3PperGCfGjNZ9AvEH0rSWW9u4KXT0hc.Y14I7GYHmCctXnN9RV34PDlEqHPJOtTy7_RivNQHttA&dib_tag=se&keywords=Dog+Water+Bottle+Portable+%C3%A2%E2%82%AC%E2%80%9C+Leak+Proof+and+Lightweight+Water+Bottle+for+Dogs%C3%A2%E2%82%AC%E2%80%9C+Travel+Water+Bottle+with+Bowl%C3%A2%E2%82%AC%E2%80%9CDog+Walking+Accessories%2CWater+Dispenser+with+Food+Container+%26+Poop+Bag%2C+YELLOW&qid=1733305546&s=pet-supplies&sr=1-1",
  "https://www.amazon.com/AIRROBO-Grooming-Capacity-Shedding-Groomer/dp/B0BYNF9GZS/ref=sr_1_1?dib=eyJ2IjoiMSJ9.ppZSOvtBf0DDf5kaG1xiprd0EzBmpr3UbANEMW_musA4eVvtdVYKArAi0W0TeL8409sBp1E7BdWP1M5ukLtBLTFiLtDzhbgM2pnOf9_X0uEkDLrpFcAjfRyjWZFdRO9LQAYf4e2-UDvDeog6eKTBlDEdOkkQ3hQzvnrofn6nzlD0OIWxofo1RRoViZ9joEQjTnfdkZz8As-1bjUEL9Br5GS0tbTH88iNcYHm4KSCWXX1S8Dz569DdaRmZVo-EP4JyfJIYwjTqcHCWjw-GbGxwcke4f7MhO_JJoaZHkSOels.BjyScVoslXfUEC-qXceHZQJyqdD1ak7PsAi4Vs5bOiA&dib_tag=se&keywords=AIRROBO+Dog+Grooming+Vacuum%2C+Dog+Grooming+Kit%2C12000Pa+Strong+Pet+Grooming+Vacuum+for+Dogs%2C+2L+Large+Capacity+Dog+Vacuum+for+Shedding+Grooming+Hair%2C+Dog+Hair+Vacuum%2C+5+Pet+Grooming+Tools&qid=1733305551&s=pet-supplies&sr=1-1",
  "https://www.amazon.com/Cleaning-Toothbrush-Veterinarians-Recommend-Disposable/dp/B0D22QY6HN/ref=sr_1_1?dib=eyJ2IjoiMSJ9.mLzq7V7jC7z-SEkuc_dzP0cunMG1CZFkeyqhx2zh3GLwwSTXbVu2Wt7Xr6tJJ1Decx-w96p1Ds-uL5byLzyy3obhxLQhFfK2gN3NN06K5sQYGbqXdqanrIkgOhsqiY9xejC2_IC8gJInk50z359up7X0misTpM0xPr3W0cHVztk1edrM6K5qaaos6ahkg0keAXM6I2lzmvJ1vpXxIZZENZZj5I46aNQUjkshTfi9BRwVA9NmZgfWNJA2m5AjKfKG8bVwABN7z-dDmbpf59lGLbATbTKQC5dsmoDReh_UvKY.55TNrsAdpU0xf-W-j-NkxFjSrGbNl1HLFEPnmRO4zmA&dib_tag=se&keywords=Dog+Teeth+Cleaning+Wipes%2C+Teeth+Cleaning+Wipes+for+Dogs+%26+Cats%2C+Remove+Bad+Breath+by+Removing+Plaque+and+Tartar+Buildup+No-Rinse%2C+Dog+Finger+Toothbrush%2C+Veterinarians+Recommend+Disposable+Pet+Wipes&qid=1733305615&s=pet-supplies&sr=1-1",
  "https://www.amazon.com/Pet-Dog-Cat-Hair-Remover-Couch/dp/B00BAGTNAQ/ref=sr_1_1?dib=eyJ2IjoiMSJ9.YNUP7mPhgh6f2vudHiRb41R6-Hl1NMF4ihW_MkSqG__r325Q8aE-F0advMbsTWvlSsUQnWFv2e1udjxzm0Zk8t-OaoS0xKBn0tInU_Y4_BzREY94dUFJUEtmkOMpnJvdzKL6btFIn0jgXbbTFyDbHh8gGXKHkw3XyOX8z0kut_NWV5v8ryPDpQy76Zr4WrTHTmrDk9cWnIvm5E22DoFxlnIIq80zRT27n1KCh9tmakYutXnPicVXZd05NWRLhRePGEY6MRFEKlnt4gBR5pVRHCzRUNI5a1EKiFkxwBgdavE.sKaRCLjL1dFkVHQVq6I6yWxz_aUGR5uaqxkOuj1t1aE&dib_tag=se&keywords=Chom+Chom+Roller+Pet+Hair+Remover+and+Reusable+Lint+Roller+-+ChomChom+Cat+and+Dog+Hair+Remover+for+Furniture%2C+Couch%2C+Carpet%2C+Clothing+and+Bedding+-+Portable%2C+Multi-Surface+Fur+Removal+Tool&qid=1733305623&s=pet-supplies&sr=1-1",
  "https://www.amazon.com/Benebone-Wishbone-Durable-Aggressive-Chewers/dp/B00CPDWT2M/ref=sr_1_1?dib=eyJ2IjoiMSJ9.marjQ7Df_Wspa42PNipD686zbRlRcTvv-p2gjbSoLhlWhHQAcH4opEK6CY2G-5mYcmxoh4ufBqy5C20ntUgzXuS9D0cGi0aFXpfkDkHK86px8P1p56ZyuRHjrBp2840Udmwa_5lgSqpBmlzqZR53fzThfdECK1Ug8AAoy5QmqFQ09XFKYGngwm2BSXt0ebKkYn1oog7Y-paKxlpbnzz3x9aKa4xEdniAqy2RCh_uIaugcavBXoIQTML8RZPP5HPL1kkUMsCwjxR0QEaDEDk9ng7wyBvyeGKjnHO3mjdFbD8.oWxnu5_eHdgLBkZIEN4V2_R-dvv6FXl3w93pTwTUTtU&dib_tag=se&keywords=Benebone+Wishbone+Durable+Dog+Chew+Toy+for+Aggressive+Chewers%2C+Real+Bacon%2C+Made+in+USA%2C+Medium&qid=1733305632&s=pet-supplies&sr=1-1",
  "https://www.amazon.com/Amazon-Basics-Leak-Proof-Quick-Dry-Absorbency/dp/B00MW8G62E/ref=sr_1_1?dib=eyJ2IjoiMSJ9.qzRjlTugZ2ZOMMT1edelfUZ5KpwmZDocf8MHQ_7SeYdFLIy6e07Khe4MpBWNR8MX7KtIESLALTEhKGi84c2yyLg7I91536shzQBuC6hVJYkWmwjQ3sO9d-RBQxRypQT4FTU1AVOllyGC2ltWnLrNtmXmLtWoqG_-S8UMhqwGy6II7SRqwhfqcjY-NBlkEAf9hDRdAdi_xxnYOSGDmJj9X7yJZxBbLXLEpbuWzM8SmwwZ9llWSNmPdimi9Bxn2QU1wLidbB0VS4_LsX7FewxxYnnboQkfD0t1s2AudHbOTUY._pWhAqjeWwK25ceCQewsEEmKB3nbogaOAUrxHxgfyQo&dib_tag=se&keywords=Amazon+Basics+Dog+and+Puppy+Pee+Pads+with+Leak-Proof+Quick-Dry+Design+for+Potty+Training%2C+Standard+Absorbency%2C+Regular+Size%2C+22+x+22+Inches%2C+Pack+of+100%2C+Blue+%26+White&qid=1733305644&s=pet-supplies&sr=1-1",
  "https://www.amazon.com/Wisdom-Panel-Essential-Ancestry-Complications/dp/B085WDGTJS/ref=sr_1_1?dib=eyJ2IjoiMSJ9.IlRT4B7T0ElXIYmSz3JBp4LoaTjRTRoUM4Tz1ORYG95-iiG7up_ZGOZay5XVZWHEo9ZlJB1-9y4MZBrvraDsUtku5UDKbJUTpZ1sZFsC3PE.yxpfs6Tf57jwI5UvGKparTSI90iIMIiosri_JaQ0ZeY&dib_tag=se&keywords=Wisdom+Health+Panel+Essential+Dog+DNA+Kit%3A+Most+Accurate+Test+for+365%2B+Breeds%2C+30+Genetic+Health+Conditions%2C+50%2B+Traits%2C+Relatives%2C+Ancestry+-+1+Pack&qid=1733305744&s=pet-supplies&sr=1-1",
  "https://www.amazon.com/WYZE-IP65-Rated-Security-Compatible-Assistant/dp/B0B9TWY11Q/ref=sr_1_1?dib=eyJ2IjoiMSJ9.ng08Hfjl_Zm-lAvGmIRqjD6-gaSJ-vTtR_3V9UkHY9R6CLYyrMK40uzrRt1XSEhh-fvhsCEavJRTop5HmZXz5Q.8HrOMx3TpXmF1xtTHFA4_tqCGHi3J4-N2xTkSY-woL8&dib_tag=se&keywords=WYZE+Cam+Pan+v3+Indoor%2FOutdoor+IP65+1080P+360%C3%82%C2%B0+Pan%2FTilt%2FZoom+Wi-Fi+Smart+Home+Security+Camera+with+Motion+Tracking+for+Baby+%26+Pet%2C+Color+Night+Vision%2C+Works+with+Alexa+%26+Google+Assistant%2C+White&qid=1733305659&s=pet-supplies&sr=1-1",
  "https://www.amazon.com/Best-Pet-Supplies-Stuffing-Squeaker/dp/B09BBM5CX8/ref=sr_1_1?dib=eyJ2IjoiMSJ9.1JNa6PnYY__4jtclNtZvWBFMT5i8V6BfWQBi40Vow7LPSdSEP6H8NhBNeJl5SqtWA9rxDuMLUR3TLH7SEkkQR37kx9K99QueDBw_DthOo9USMzgP8StoHJ4KCmDEgwxla-epnlUm_cZQ3_crAJ2dWOBxglSMcu-f5ZsuOs5Kul2cfTcEPEdJwiVCyFkrfqtijP7fLWU8D5RkCikzwVkrUPvwFH0rDLp7wSa5Vc-rLmJRF0WLPZFdFgXBzf3JYfs6WXgFxIOYBgVmGnRmZ5dE8J0TgFMl42AbaUYXIYm6hzs.IexDCT-1W-w15BU5l-jKvIMyySAA1GlrthgFHDTu05k&dib_tag=se&keywords=Best+Pet+Supplies+Crinkle+Dog+Toy+for+Small%2C+Medium%2C+and+Large+Breeds%2C+Cute+No+Stuffing+Duck+with+Soft+Squeaker%2C+Fun+for+Indoor+Puppies+and+Senior+Pups%2C+Plush+No+Mess+Chew+and+Play+-+Yellow&qid=1733305682&s=pet-supplies&sr=1-1",
  "https://www.amazon.com/Seresto-Vet-Recommended-Treatment-Prevention-Collar/dp/B00B8CG602/ref=sr_1_1?dib=eyJ2IjoiMSJ9.irTKgDJcUvNKzTcJZEZ0Xq2e3i02f9eOJt_IMoKoSVSz4tkoxUF_sSz8j20EfYV_69TQcDXtSuLjXVuoelamWL7_c5wobR2kpqOAdaBHFPlKQS4305sZ1-91JV4Fni-tt13EoAQy8ndCyWLowmsIK5ucGFw2TcZf5zfnjPvrNcj0hLsqHPbpgRie7rwRsnbHldBmKA7wq2B9C5n9e5Pa3eXWR44zuFV9Udz05bumSfiKSC9b0y0CaSJRNk6wb4P9_CmGrFsQJkggycGZS4UeNOgLwLsfkSjDs-jfh4UCBsc.J26CAtYzgK0QwjBfg4lo21iT5CmPNMlj_4IGfbFWNQw&dib_tag=se&keywords=Seresto+Large+Dog+Vet-Recommended+Flea+%26+Tick+Treatment+%26+Prevention+Collar+for+Dogs+Over+18+lbs.+%7C+8+Months+Protection&qid=1733305760&s=pet-supplies&sr=1-1"
)

product_titles <- c(
  "Dog Water Bottle Portable â€“ Leak Proof and Lightweight Water Bottle for Dogsâ€“ Travel Water Bottle with Bowlâ€“Dog Walking Accessories,Water Dispenser with Food Container & Poop Bag, YELLOW",
  "AIRROBO Dog Grooming Vacuum, Dog Grooming Kit,12000Pa Strong Pet Grooming Vacuum for Dogs, 2L Large Capacity Dog Vacuum for Shedding Grooming Hair, Dog Hair Vacuum, 5 Pet Grooming Tools",
  "Dog Teeth Cleaning Wipes, Teeth Cleaning Wipes for Dogs & Cats, Remove Bad Breath by Removing Plaque and Tartar Buildup No-Rinse, Dog Finger Toothbrush, Veterinarians Recommend Disposable Pet Wipes",
  "Chom Chom Roller Pet Hair Remover and Reusable Lint Roller - ChomChom Cat and Dog Hair Remover for Furniture, Couch, Carpet, Clothing and Bedding - Portable, Multi-Surface Fur Removal Tool",
  "Benebone Wishbone Durable Dog Chew Toy for Aggressive Chewers, Real Bacon, Made in USA, Medium",
  "Amazon Basics Dog and Puppy Pee Pads with Leak-Proof Quick-Dry Design for Potty Training, Standard Absorbency, Regular Size, 22 x 22 Inches, Pack of 100, Blue & White",
  "Wisdom Health Panel Essential Dog DNA Kit: Most Accurate Test for 365+ Breeds, 30 Genetic Health Conditions, 50+ Traits, Relatives, Ancestry - 1 Pack",
  "WYZE Cam Pan v3 Indoor/Outdoor IP65 1080P 360Â° Pan/Tilt/Zoom Wi-Fi Smart Home Security Camera with Motion Tracking for Baby & Pet, Color Night Vision, Works with Alexa & Google Assistant, White",
  "Best Pet Supplies Crinkle Dog Toy for Small, Medium, and Large Breeds, Cute No Stuffing Duck with Soft Squeaker, Fun for Indoor Puppies and Senior Pups, Plush No Mess Chew and Play - Yellow",
  "Seresto Large Dog Vet-Recommended Flea & Tick Treatment & Prevention Collar for Dogs Over 18 lbs. | 8 Months Protection"
)

category_name <- "Dogs Supplies"

# Create an empty dataframe to store all reviews
all_product_reviews <- data.frame()

# Loop over each product URL
for (idx in seq_along(product_urls)) {
  url <- product_urls[idx]
  product_title <- product_titles[idx]
  
  # Initialize vectors to store individual review information for the current product
  reviewer_names <- character()
  review_dates <- character()
  review_comments <- character()
  verified_purchases <- character()
  star_ratings <- numeric()
  
  # Start scraping reviews, page by page
  page_number <- 1
  while(length(reviewer_names) < 2) {
    # Modify the URL to include the current page number
    paginated_url <- paste0(url, "?pageNumber=", page_number)
    
    try({
      # Read the HTML of the current page
      page_content <- read_html(paginated_url)
      
      # Extract all review sections from the page
      review_elements <- page_content %>%
        html_nodes(".review")
      
      # Extract reviewer names
      reviewer_names_page <- review_elements %>%
        html_nodes(".a-profile-name") %>%
        html_text(trim = TRUE)
      
      # Extract review dates
      review_dates_page <- review_elements %>%
        html_nodes(".review-date") %>%
        html_text(trim = TRUE)
      
      # Extract review comments
      review_comments_page <- review_elements %>%
        html_nodes(".review-text-content span") %>%
        html_text(trim = TRUE)
      
      # Extract verified purchase labels
      verified_purchases_page <- review_elements %>%
        html_nodes(".review-vp-label") %>%
        html_text(trim = TRUE)
      
      # Extract star ratings
      star_ratings_page <- review_elements %>%
        html_nodes(".a-icon-alt") %>%
        html_text(trim = TRUE) %>%
        str_extract("\\d\\.\\d") %>%  # Extract numeric rating (e.g., 4.5)
        as.numeric()
      
      # Append the collected review data to the vectors
      reviewer_names <- c(reviewer_names, reviewer_names_page)
      review_dates <- c(review_dates, review_dates_page)
      review_comments <- c(review_comments, review_comments_page)
      verified_purchases <- c(verified_purchases, verified_purchases_page)
      star_ratings <- c(star_ratings, star_ratings_page)
      
      # Increment the page number to fetch the next set of reviews
      page_number <- page_number + 1
    }, silent = TRUE)
    
    # Stop if we've collected at least 20 reviews
    if(length(reviewer_names) >= 2) {
      break
    }
  }
  
  # Limit the data to the first 20 reviews (if more were collected)
  max_reviews <- min(2, length(reviewer_names))
  reviewer_names <- reviewer_names[1:max_reviews]
  review_dates <- review_dates[1:max_reviews]
  review_comments <- review_comments[1:max_reviews]
  verified_purchases <- verified_purchases[1:max_reviews]
  star_ratings <- star_ratings[1:max_reviews]
  
  # Create a data frame for the current product's reviews with updated column names
  product_reviews <- data.frame(
    ProductCategory = rep(category_name, max_reviews),
    ProductName = rep(product_title, max_reviews),
    Reviewer = reviewer_names,
    ReviewDate = review_dates,
    Comment = review_comments,
    Rating = star_ratings,
    IsVerifiedPurchase = verified_purchases,
    stringsAsFactors = FALSE
  )
  
  # Append the current product's reviews to the master data frame
  all_product_reviews <- bind_rows(all_product_reviews, product_reviews)
}

# Print the compiled reviews data
print(all_product_reviews)

# Save the reviews to a CSV file for further analysis
write.csv(all_product_reviews, "DogSupplies_Reviews.csv", row.names = FALSE)
```

```{r}
# Define the list of product URLs and corresponding names
product_urls <- c(
  "https://www.amazon.com/YOURUIKEY-Clothes-Sweater-Pleated-Clothing/dp/B0D8PS4HPF/ref=sr_1_1?dib=eyJ2IjoiMSJ9.SuxpNjp9r8cz4OaB-4f3_ywlZALvS_GGNgHyG0tIjbZ-ChxuiVRFNabY623HGAKu4zaXx8iS3oCogXudTJXWmMvZ585MC0KrUSd5tNVfXKp9P3ee9Cvb68TYuYHOlP2RpSnwP7kWDM_6BvxDuRxIzIYwjYptG0QZbo8sVQ2tbNpU8LDlhONn0ooeg1HYNkNHaqtt99wvutScZ1BwGVJxFxq24A7TG9SuO3PtEGuxV9HeDrSzT3nLzml3eKUXrcyeA1-bcv8LkB-YECyWGSSqPg_zVFu5kYU4_kab1yUwYKM.dsGXCK1hf0aGOh0LNaaU5wilSmYVuNMV-jGIG9SONNI&dib_tag=se&keywords=Girls+Pleated+Skirt+Set+Fall+Winter+2+Piece+Outfit+Lattice+Dresses+Long+Sleeve+Top+Cute+Clothes+Outfit+for+Kid&qid=1733306288&sr=8-1",
  "https://www.amazon.com/sspa/click?ie=UTF8&spc=MTozOTIyNzc5NjI1NDEwNzE5OjE3MzMzMDYyOTg6c3BfYXRmOjMwMDAyNzA4ODc5OTQwMjo6MDo6&url=%2FYOURUIKEY-Casual-Winter-Dresses-Clothes%2Fdp%2FB0BB2QF3C4%2Fref%3Dsr_1_1_sspa%3Fdib%3DeyJ2IjoiMSJ9.CL12EddSP16BN183v5waxt4SqVZu6ukhYsKomJgcLy8QvxkQvc82KmQgqtcYINja0QoXe6hdqNrQF_uf6AvSQMYNRTGg9_SOf7UoZakkNTPMPGhq6hacvzTa3J4XF7dFNdQsouBlkBxatSgrMuHEzKDvJLbbjt8pM3BXBigzMI23G3d2k9T6lI1e33DYP3Ri_TFLHQ6oRTAF7zskwghci8N-FwdUNgZEghYFe7AP7LuSbrlI7EFyC2aEGv6eaKoMXQ4bOo8Z5U1G5X39wF3rshKEPvwFn4rXlypkAogcIWw.Qv1PLLgiyuPBFGH-cf61O_9xcZgj3A-sEVWCy8OrQxA%26dib_tag%3Dse%26keywords%3DGirl%2BSkirt%2BSets%2BCasual%2BWinter%2BFall%2BDresses%2BCute%2BClothes%2BOutfit%2Bfor%2BGirls%26qid%3D1733306298%26sr%3D8-1-spons%26sp_csd%3Dd2lkZ2V0TmFtZT1zcF9hdGY%26psc%3D1",
  "https://www.amazon.com/LIFAky-Clothes-Outfits-Sleeve-Sweatpants/dp/B0DB5VXZHW/ref=sr_1_1?dib=eyJ2IjoiMSJ9.JoGCgu_83Lz31WtxEOHS3sscPwT_kPINdPBZKGrA5VD8i5TudDJlae9L1Vo4OqCp1c43ImUkcfa5cP8JuCe6btrAI2-HplVmkoie7DF9AneKMVcQ5TCmS4rNPtWP_GsTDrmwA5vZlHU14ZOOFsrkWhqRYGNT_e54yASMO6y7FsRfuYTdVMnXMIzTie_xAUaM3Opam2TQBWdW-Xh9SoZHWXLhHQTH8i1ToEo3tvXNxIOwPGy6nvZNbEXMk9hBGRhnv9ckRUN_repfqLXd0PTEmMpZqr8smrCJJU0o7DxLrhQ.ri3LrZo3Jx-uLJhJyIYDh3K4ru-msW0vfjRxqXi4g88&dib_tag=se&keywords=Girls+Clothes+3+Piece+Outfits+Long+Sleeve+Tracksuit+Hoodie+Pants+Fall+Winter+Matching+Sets&qid=1733306306&sr=8-1",
  "https://www.amazon.com/Gaupafmb-Girls-Pullover-Sweatshirt-Leggings/dp/B0D4QCVK86/ref=sr_1_1?dib=eyJ2IjoiMSJ9.6cumUTL6xlwm1wOxmlsTIhIK68ksAPv9iCVKw7BXIrGPsRClZlk9y22xSwTIMd49fliuTSsnyxIxIXwc_zeJ7yf1dox13aCH4iAoEYydqFlf1pFlPuR8IyMibl-kezdjFiVA15Jo4fqMM7I8GmAuNGoG9NgTtZY67m3r-bYbwRLTRQuauKX3__piEg9wQZiZroAG0SkFelZ8NQkc7PvQbJcYfCR5-MUsiL5UDWXcKQr86MsnbO9M4JqgX202N__A0YeDava_SqasXt9d1Eim8Nt_4i-SB8v52Hb4H_EshFE.TLHETAvpBGDWeUrArxys2fzVAxqJcOzF3G0FkqFeBNc&dib_tag=se&keywords=Girls+Clothes+Cool+Girl+Print+Tie+Dye+Hoodie+Pullover+Sweatshirt+Leggings+2PC+Outfits&qid=1733306319&sr=8-1",
  "https://www.amazon.com/FNOVCO-Cartoon-Animal-Patterns-Cotton/dp/B082D7TSK1/ref=sr_1_1?dib=eyJ2IjoiMSJ9.5QGLXiirlVlw2tsdrdC9NCny5dnIuld65XAXEGi-I8kQPE3FPzXQLC2JMWTgXPiier7wNn9PjqJuWSnKBNd5dGsV4gUgG1MAFHjm1VGSfCcBrmBT5dzu3n8-ZZhvOOxEpWsqQpANO82sboGWCyb46SWUqCIMNW8mNiL1dVMjOSM4Az0LaUhPGumn8YD_29O2tWM7rcJMKRG8b_sfjWQekfOaasZAzZjB-0VjtWHxQmEcvYCXEEazp1vmSTkLpoEwVTW2kKJJ0asxdlrTwy81i10UiNl_s_QLRHfAXPRqFC4.AmZbaKUF7-7DPs9zFIzxV-IHHp_J1MGfXRNOHvUGLSM&dib_tag=se&keywords=FNOVCO+Girls+Knee+High+Socks+Kids+Crazy+Fun+Gift+Cute+Animal+Patterns+Cotton+Long+Socks+6+Pairs&qid=1733306326&sr=8-1",
  "https://www.amazon.com/Disney-Stitch-Little-Pullover-Crossover/dp/B0B7KG8ZBQ/ref=sr_1_1?dib=eyJ2IjoiMSJ9.Ufenl7pZS6UoSqOXs--b2mqstWk39jOwfe6n7mOG_vdkWAZnP1mCokkybAcFlnqs8Y00P8O2vqMvZGVLsQQIxXLlAWcNfagmgSWR20uJ6YxmwgqNsRuTHBz7Dt3dMUL1iqlDQ48V0dRKbL0dMBsjCbszkdDLAN9W6A5d5UtsxOiwIt9b6xBw7lvU0ChZTYYIuk5I7S2Kc9XJsYQbqGbzKJ6FuHxP79-6Qnw24Kzer7kP23mD3BcUoFvY1qcoKV9wpnUTYGaxvj3Tgll1G4KxAF6zgLTaZaFRJs6wienACMw.EvXylsMnPwnE6hrVPA1iaY-hli5vMx8lM59N-oiKV5k&dib_tag=se&keywords=Disney+Lilo+%26+Stitch+Girls+French+Terry+Crossover+Hoodie+Toddler+to+Big+Kid&qid=1733306336&s=pet-supplies&sr=1-1",
  "https://www.amazon.com/Hanes-Toddler-Trainer-Briefs-Assorted/dp/B0BHX76DF8/ref=sr_1_1?dib=eyJ2IjoiMSJ9.DKp93eX9H0gGGpgs8c07W1j9N748y5uOgTQLe9QDJkgVBUvZnTLeUEs9WNLnFreoeYrebC2Jt34MbynL4JPG6yHrG0s_iL4psor-dFl2HT563e_H3O5uyAsA_Agg_PeicsIc9lYbjRMrPJ3_iJmf6rUOV6R6EPuy57zKH3S1gIPuEMXx4WiQXTTa9rx2l4H7Z4hMfokmn1FeAS3VP--oBb_KLIFbBs1_1rIxAQ3lB2E8K0YrBxn7tkb0RA3My1OPRKN5Iz8IOQb1t6PlyYZ5VqmP-pw0V8BhKzS6bYsq7b8.ZstP8E0m-lgtStMTRryDKN5AqWXmBY490SdjaY1ZgEU&dib_tag=se&keywords=Hanes+Girls%27+Hanes+Toddler+Girls%27+Potty+Trainer+Briefs%2C+6-Pack&qid=1733306348&sr=8-1",
  "https://www.amazon.com/sspa/click?ie=UTF8&spc=MToxOTAzMjQ2MzU1Nzg2Mjg0OjE3MzMzMDYzNTc6c3BfYXRmOjIwMDAzNTg0NTA3NTA5ODo6MDo6&url=%2FChildrens-Place-Toddler-Leggings-Months%2Fdp%2FB08Y61P3FS%2Fref%3Dsr_1_1_sspa%3Fdib%3DeyJ2IjoiMSJ9.pZdZ873k0cBPj639XkXQeJ5ooiOPgiZ1kkNgGoRRRBNsru-4YAJDGBp7wV0Ro2sualfMxgf7_JKp2uxo_htm9ROatlLuERBRrCpHVXd0A-saIdhCUakpJ11hALXdDW-m-i-Td2KAlb3aQ0cj5r1vv4XT7HNWe6Q8FZ7pEDMe-vsk674gPtWyvBdH97OsUDfR0Ys886RetnhXIFaLsl9jlJWh0rDhYh3_0IUwlZZy_yorW3FH81uf_roTEgbU7xS6YdDj2jcnzF8J50r9XC6HQcJXTtjNa8LVr2thhDWHAqo.DDiLV8FFmLbsSiVJMY4Iud6uSzrJVtIB0jRYOP8c-Vs%26dib_tag%3Dse%26keywords%3DThe%2BChildren%2527s%2BPlace%2BGirls%2527%2BAssorted%2BLeggings%2B5%2BPack%26qid%3D1733306357%26sr%3D8-1-spons%26sp_csd%3Dd2lkZ2V0TmFtZT1zcF9hdGY%26psc%3D1",
  "https://www.amazon.com/Fruit-Loom-Toddler-Hipster-Assorted/dp/B0797MPF4Y/ref=sr_1_1?dib=eyJ2IjoiMSJ9.jtOA2MA17tHUC7m-R0U4hsok34_3TIeSwcnqvdHU9Kw4MACWSi1LF5y8-V9uj_eOpevP_uZSFgK39W-pxdbumJSl_CJOEd6mHDPL1199uZTRXH5NbB5psmpJy46sdy66jr4VNv_iXH5mr2Nv_LSPmc8RwSAzhE1JieBNAklNEgmbzh3CPEZdBor3W51d1MlW6uwazYU3QxcAGwdO2U2f2ofpVEopsa1ivWagKE6qy6W0K1ECmGIYID1LDnfqFWywuJckWwSVZE80DqIfIHZDPg1FX03hRxqhK12lCfAa1cM.Vidkl77yBNj9QkK5UfeVBBUugYH46cxDmG-pYbvWWok&dib_tag=se&keywords=Fruit+of+the+Loom+Toddler+Girls%27+Toddler+Girls%27+Tag-free+Cotton+Underwear&qid=1733306366&sr=8-1",
  "https://www.amazon.com/sspa/click?ie=UTF8&spc=MTozOTQ3OTE5NDA1MjI0NzIyOjE3MzMzMDYzODQ6c3BfYXRmOjMwMDI2NTc1OTU1NTgwMjo6MDo6&url=%2FDisney-Frozen-Minnie-Princess-Nightgown%2Fdp%2FB094YPSWVR%2Fref%3Dsr_1_1_sspa%3Fdib%3DeyJ2IjoiMSJ9.yw-5MubYU9wPUWAubRCAOfTv7BYmWCOQtmRrByVwF6QmUohz1NBWGi998qqNsBn7MNpcSv591EbB_BnyHu5xAFA2tEzS7kZAv5k5onNB_VIPDF5KQ6R6xWwyGTGLzfVn8QuA-mOs-yphC5i5uhhlJ53gtclnwbhGhU3Dr_uaULYGazs0P0-MVbUkeqG9HiMYbLuIC0Pj9Driayey6mh_YBKG83lzWM9VVI2FoyhGktmrpDLmW8dqPsrz_RuPa3OKVIOxICdmeL46pCXPA6S5Aav38KgcsVStJxBwuL2deUU.LxC_UUzXg8Osq4KurmRzfG5LVV9OorruOGNlWuQOM8I%26dib_tag%3Dse%26keywords%3DDisney%2BGirls%2527%2B3-Pack%2BNightgowns%252C%2BSoft%2B%2526%2BCute%2BPajamas%2Bfor%2BKids%26qid%3D1733306384%26sr%3D8-1-spons%26sp_csd%3Dd2lkZ2V0TmFtZT1zcF9hdGY%26psc%3D1"
)

product_titles <- c(
  "Girls Pleated Skirt Set Fall Winter 2 Piece Outfit Lattice Dresses Long Sleeve Top Cute Clothes Outfit for Kid",
  "Girl Skirt Sets Casual Winter Fall Dresses Cute Clothes Outfit for Girls",
  "Girls Clothes 3 Piece Outfits Long Sleeve Tracksuit Hoodie Pants Fall Winter Matching Sets",
  "Girls Clothes Cool Girl Print Tie Dye Hoodie Pullover Sweatshirt Leggings 2PC Outfits",
  "FNOVCO Girls Knee High Socks Kids Crazy Fun Gift Cute Animal Patterns Cotton Long Socks 6 Pairs",
  "Disney Lilo & Stitch Girls French Terry Crossover Hoodie Toddler to Big Kid",
  "Hanes Girls' Hanes Toddler Girls' Potty Trainer Briefs, 6-Pack",
  "The Children's Place Girls' Assorted Leggings 5 Pack",
  "Fruit of the Loom Toddler Girls' Toddler Girls' Tag-free Cotton Underwear",
  "Disney Girls' 3-Pack Nightgowns, Soft & Cute Pajamas for Kids"
)

category_name <- "Girls Clothing"

# Create an empty dataframe to store all reviews
all_product_reviews <- data.frame()

# Loop over each product URL
for (idx in seq_along(product_urls)) {
  url <- product_urls[idx]
  product_title <- product_titles[idx]
  
  # Initialize vectors to store individual review information for the current product
  reviewer_names <- character()
  review_dates <- character()
  review_comments <- character()
  verified_purchases <- character()
  star_ratings <- numeric()
  
  # Start scraping reviews, page by page
  page_number <- 1
  while(length(reviewer_names) < 2) {
    # Modify the URL to include the current page number
    paginated_url <- paste0(url, "?pageNumber=", page_number)
    
    try({
      # Read the HTML of the current page
      page_content <- read_html(paginated_url)
      
      # Extract all review sections from the page
      review_elements <- page_content %>%
        html_nodes(".review")
      
      # Extract reviewer names
      reviewer_names_page <- review_elements %>%
        html_nodes(".a-profile-name") %>%
        html_text(trim = TRUE)
      
      # Extract review dates
      review_dates_page <- review_elements %>%
        html_nodes(".review-date") %>%
        html_text(trim = TRUE)
      
      # Extract review comments
      review_comments_page <- review_elements %>%
        html_nodes(".review-text-content span") %>%
        html_text(trim = TRUE)
      
      # Extract verified purchase labels
      verified_purchases_page <- review_elements %>%
        html_nodes(".review-vp-label") %>%
        html_text(trim = TRUE)
      
      # Extract star ratings
      star_ratings_page <- review_elements %>%
        html_nodes(".a-icon-alt") %>%
        html_text(trim = TRUE) %>%
        str_extract("\\d\\.\\d") %>%  # Extract numeric rating (e.g., 4.5)
        as.numeric()
      
      # Append the collected review data to the vectors
      reviewer_names <- c(reviewer_names, reviewer_names_page)
      review_dates <- c(review_dates, review_dates_page)
      review_comments <- c(review_comments, review_comments_page)
      verified_purchases <- c(verified_purchases, verified_purchases_page)
      star_ratings <- c(star_ratings, star_ratings_page)
      
      # Increment the page number to fetch the next set of reviews
      page_number <- page_number + 1
    }, silent = TRUE)
    
    # Stop if we've collected at least 20 reviews
    if(length(reviewer_names) >= 2) {
      break
    }
  }
  
  # Limit the data to the first 20 reviews (if more were collected)
  max_reviews <- min(2, length(reviewer_names))
  reviewer_names <- reviewer_names[1:max_reviews]
  review_dates <- review_dates[1:max_reviews]
  review_comments <- review_comments[1:max_reviews]
  verified_purchases <- verified_purchases[1:max_reviews]
  star_ratings <- star_ratings[1:max_reviews]
  
  # Create a data frame for the current product's reviews with updated column names
  product_reviews <- data.frame(
    ProductCategory = rep(category_name, max_reviews),
    ProductName = rep(product_title, max_reviews),
    Reviewer = reviewer_names,
    ReviewDate = review_dates,
    Comment = review_comments,
    Rating = star_ratings,
    IsVerifiedPurchase = verified_purchases,
    stringsAsFactors = FALSE
  )
  
  # Append the current product's reviews to the master data frame
  all_product_reviews <- bind_rows(all_product_reviews, product_reviews)
}

# Print the compiled reviews data
print(all_product_reviews)

# Save the reviews to a CSV file for further analysis
write.csv(all_product_reviews, "GirlsClothing_Reviews.csv", row.names = FALSE)
```

